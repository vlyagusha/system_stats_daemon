syntax = "proto3";

package system_stat_service;

option go_package = "./;internalgrpc";

service SystemStatsStreamService {
  rpc FetchResponse(RequestMessage) returns (stream ResponseMessage);
}

message RequestMessage {
  int32 n = 1;
  int32 m = 2;
}

message ResponseMessage {
  string title = 1;
  string collectedAt = 2;
  LoadMessage load = 3;
  CPUMessage cpu = 4;
  DiskMessage disk = 5;
}

message LoadMessage {
  float load1 = 1;
  float load5 = 2;
  float load15 = 3;
}

message CPUMessage {
  int32 user = 1;
  int32 system = 2;
  int32 idle = 3;
}

message DiskMessage {
  float kbt = 1;
  int32 tps = 2;
  float mbs = 3;
}